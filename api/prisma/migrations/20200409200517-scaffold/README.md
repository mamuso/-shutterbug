# Migration `20200409200517-scaffold`

This migration has been generated by Manuel Mu√±oz Solera at 4/9/2020, 8:05:17 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Report" (
    "createdAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "current" boolean  NOT NULL DEFAULT false,
    "id" text  NOT NULL ,
    "page" text   ,
    "slug" text  NOT NULL DEFAULT '',
    "url" text   ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."Page" (
    "createdAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "id" text  NOT NULL ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."Capture" (
    "createdAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "device" text   ,
    "diff" boolean  NOT NULL DEFAULT false,
    "id" text  NOT NULL ,
    "page" text   ,
    "report" text   ,
    "url" text   ,
    "urldiff" text   ,
    "urlmin" text   ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."Device" (
    "createdAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "id" text  NOT NULL ,
    "slug" text  NOT NULL DEFAULT '',
    PRIMARY KEY ("id")
) 

CREATE UNIQUE INDEX "Report.slug" ON "public"."Report"("slug")

CREATE UNIQUE INDEX "Device.slug" ON "public"."Device"("slug")

ALTER TABLE "public"."Report" ADD FOREIGN KEY ("page")REFERENCES "public"."Page"("id") ON DELETE SET NULL

ALTER TABLE "public"."Capture" ADD FOREIGN KEY ("report")REFERENCES "public"."Report"("id") ON DELETE SET NULL

ALTER TABLE "public"."Capture" ADD FOREIGN KEY ("page")REFERENCES "public"."Page"("id") ON DELETE SET NULL

ALTER TABLE "public"."Capture" ADD FOREIGN KEY ("device")REFERENCES "public"."Device"("id") ON DELETE SET NULL
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200409200517-scaffold
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,40 @@
+datasource db {
+  provider = "postgresql"
+  url      = env("POSTGRES_URL")
+}
+
+generator client {
+  provider = "prisma-client-js"
+}
+
+model Report {
+  id        String    @default(cuid()) @id
+  slug      String    @unique
+  createdAt DateTime  @default(now())
+  captures  Capture[]
+  url       String?
+  current   Boolean  @default(false)
+}
+
+model Page {
+  id        String    @default(cuid()) @id
+  captures  Capture[]
+  reports   Report[]
+  createdAt DateTime  @default(now())
+}
+
+model Capture {
+  id          String  @default(cuid()) @id
+  url         String?
+  urlmin      String?
+  urldiff     String?
+  diff        Boolean  @default(false)
+  device      Device?
+  createdAt   DateTime  @default(now())
+}
+
+model Device {
+  id        String    @default(cuid()) @id
+  slug      String    @unique
+  createdAt DateTime  @default(now())
+}
```


